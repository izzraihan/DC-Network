set version 22.2R2.10
set system host-name DC2-Leaf2
set system root-authentication encrypted-password "$6$roZRcz9.$zEE84KdgDSfVhnC9UlZwRYFsXbDACqdvLhLu95syZDsooVbqPoqiEA5L0Jvu0ydpIN2MAWmv5PEvjLtSGtLOx."
set system scripts language python3
set system login user jcluser uid 2000
set system login user jcluser class super-user
set system login user jcluser authentication encrypted-password "$6$MAJwk7fE$jx6kAF4AODN.jllwJC5ZzxmKvL1CWclU0.V2DhUiZFN8JPebRUNG1sqNaS6r9CG0.xvkoPXGxxjYyZc0ERSKc0"
set system login user labuser uid 2001
set system login user labuser class super-user
set system login user labuser authentication encrypted-password "$6$rnvX5Rt9$PyteArQIiIkXOVe09HElXUF5DNNGr4NP5wMtK2D2EUVz6gf.uiQC/LRYKOb9lV1BaOgc1NbqMv0/YM8B0BI5C1"
set system services ssh root-login allow
set system services telnet
set system services netconf ssh
set system services rest http port 8080
set system services rest enable-explorer
set system arp aging-timer 5
set system syslog user * any emergency
set system syslog file interactive-commands interactive-commands any
set system syslog file messages any notice
set system syslog file messages authorization info
set system extensions providers juniper license-type juniper deployment-scope commercial
set system extensions providers chef license-type juniper deployment-scope commercial
set system processes dhcp-service traceoptions file dhcp_logfile
set system processes dhcp-service traceoptions file size 10m
set system processes dhcp-service traceoptions level all
set system processes dhcp-service traceoptions flag packet
set system ntp server 100.123.0.1
set chassis aggregated-devices ethernet device-count 1
set interfaces ge-0/0/0 description "to spine1"
set interfaces ge-0/0/0 mtu 9192
set interfaces ge-0/0/0 unit 0 family inet address 10.1.114.2/30
set interfaces ge-0/0/1 description "to spine2"
set interfaces ge-0/0/1 mtu 9192
set interfaces ge-0/0/1 unit 0 family inet address 10.1.124.2/30
set interfaces ge-0/0/2 unit 0 family ethernet-switching interface-mode access
set interfaces ge-0/0/2 unit 0 family ethernet-switching vlan members VNI_15000
set interfaces ge-0/0/3 unit 0 family ethernet-switching interface-mode access
set interfaces ge-0/0/3 unit 0 family ethernet-switching vlan members VNI_25000
set interfaces ge-0/0/4 disable
set interfaces ge-0/0/4 ether-options 802.3ad ae0
set interfaces ae0 esi auto-derive type-1-lacp
set interfaces ae0 esi all-active
set interfaces ae0 aggregated-ether-options lacp active
set interfaces ae0 aggregated-ether-options lacp system-id 01:02:03:04:05:06
set interfaces ae0 unit 0 family ethernet-switching interface-mode trunk
set interfaces ae0 unit 0 family ethernet-switching vlan members 150
set interfaces em1 unit 0 family inet address 169.254.0.2/24
set interfaces fxp0 unit 0 family inet dhcp
set interfaces irb unit 150 proxy-macip-advertisement
set interfaces irb unit 150 virtual-gateway-accept-data
set interfaces irb unit 150 family inet address 192.168.150.2/24 preferred
set interfaces irb unit 150 family inet address 192.168.150.2/24 virtual-gateway-address 192.168.150.254
set interfaces irb unit 250 proxy-macip-advertisement
set interfaces irb unit 250 virtual-gateway-accept-data
set interfaces irb unit 250 family inet address 192.168.250.2/24 preferred
set interfaces irb unit 250 family inet address 192.168.250.2/24 virtual-gateway-address 192.168.250.254
set interfaces lo0 unit 0 family inet address 10.255.1.4/32
set multi-chassis mc-lag consistency-check
set snmp community public authorization read-only
set forwarding-options storm-control-profiles default all
set policy-options policy-statement IPCLOS_BGP_EXP term loopback from protocol direct
set policy-options policy-statement IPCLOS_BGP_EXP term loopback from protocol bgp
set policy-options policy-statement IPCLOS_BGP_EXP term loopback then accept
set policy-options policy-statement IPCLOS_BGP_EXP term default then reject
set policy-options policy-statement IPCLOS_BGP_IMP term loopback from protocol bgp
set policy-options policy-statement IPCLOS_BGP_IMP term loopback from protocol direct
set policy-options policy-statement IPCLOS_BGP_IMP term loopback then accept
set policy-options policy-statement IPCLOS_BGP_IMP term default then reject
set policy-options policy-statement PFE-LB then load-balance per-packet
set routing-instances evpn_vs instance-type virtual-switch
set routing-instances evpn_vs protocols evpn encapsulation vxlan
set routing-instances evpn_vs protocols evpn default-gateway no-gateway-community
set routing-instances evpn_vs protocols evpn extended-vni-list all
set routing-instances evpn_vs vtep-source-interface lo0.0
set routing-instances evpn_vs interface ge-0/0/2.0
set routing-instances evpn_vs interface ge-0/0/3.0
set routing-instances evpn_vs interface ae0.0
set routing-instances evpn_vs route-distinguisher 10.225.1.4:1
set routing-instances evpn_vs vrf-target target:64589:1111
set routing-instances evpn_vs vrf-target auto
set routing-instances evpn_vs vlans VNI_15000 vlan-id 150
set routing-instances evpn_vs vlans VNI_15000 l3-interface irb.150
set routing-instances evpn_vs vlans VNI_15000 vxlan vni 15000
set routing-instances evpn_vs vlans VNI_25000 vlan-id 250
set routing-instances evpn_vs vlans VNI_25000 l3-interface irb.250
set routing-instances evpn_vs vlans VNI_25000 vxlan vni 25000
set routing-instances evpn_vs vlans default vlan-id 1
set routing-options router-id 10.255.1.4
set routing-options autonomous-system 64589
set routing-options static route 0.0.0.0/0 next-hop 100.123.0.1
set routing-options static route 100.123.0.0/16 next-hop 100.123.0.1
set routing-options forwarding-table export PFE-LB
set routing-options forwarding-table ecmp-fast-reroute
set protocols router-advertisement interface fxp0.0 managed-configuration
set protocols bgp group IPCLOS_eBGP type external
set protocols bgp group IPCLOS_eBGP mtu-discovery
set protocols bgp group IPCLOS_eBGP import IPCLOS_BGP_IMP
set protocols bgp group IPCLOS_eBGP export IPCLOS_BGP_EXP
set protocols bgp group IPCLOS_eBGP local-as 65514
set protocols bgp group IPCLOS_eBGP multipath multiple-as
set protocols bgp group IPCLOS_eBGP neighbor 10.1.114.1 description "EBGP peering to Spine1"
set protocols bgp group IPCLOS_eBGP neighbor 10.1.114.1 peer-as 65511
set protocols bgp group IPCLOS_eBGP neighbor 10.1.124.1 description "EBGP peering to Spine2"
set protocols bgp group IPCLOS_eBGP neighbor 10.1.124.1 peer-as 65512
set protocols bgp group OVERLAY type internal
set protocols bgp group OVERLAY local-address 10.255.1.4
set protocols bgp group OVERLAY family evpn signaling
set protocols bgp group OVERLAY neighbor 10.255.1.1 description "IBGP/overlay peering to Spine1"
set protocols bgp group OVERLAY neighbor 10.255.1.2 description "IBGP/overlay peering to Spine2"
set protocols bgp log-updown
set protocols bgp graceful-restart
set protocols lldp interface all
set protocols lldp-med interface all
set protocols igmp-snooping vlan default
set vlans default vlan-id 1
